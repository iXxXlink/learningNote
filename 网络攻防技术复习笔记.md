

<img src="D:\Typora\note\网络攻防技术.assets\image-20201231191530858.png" alt="image-20201231191530858" style="zoom:50%;" />

## 软件漏洞

1. 漏洞：指硬件、软件、操作系统、网络协议、数据库等在设计上、是线上出现的可以被攻击者利用的缺陷。

2. 漏洞攻击的步骤

   1. 漏洞发现
   2. 漏洞分析
   3. 漏洞利用

3. 漏洞导致的后果：获得最高权限、普通用户升为管理员用户、拒绝服务攻击等

4. 典型漏洞：

   1. 栈溢出
   2. 堆溢出
   3. 格式化串
   4. 整型溢出
   5. 释放再使用

5. 栈溢出原理：

   1. 程序在内存的存放形式：内存地址从低到高（正常存放顺序就是从低地址到高地址，但是栈特殊，栈底在高地址，然后向低地址存储），先后存储代码段、数据段、堆、栈。

      ![image-20201110214652994](C:\Users\Lch\AppData\Roaming\Typora\typora-user-images\image-20201110214652994.png)

      ![image-20201110214702319](C:\Users\Lch\AppData\Roaming\Typora\typora-user-images\image-20201110214702319.png)

      1. 代码段：机器码和只读数据
      2. 数据段：已初始化的全局和静态变量（.data）和未初始化的全局和静态变量（.bss）
      3. 堆（heap）：存储程序运行时分配的变量，使用malloc（）、new()等分配扩张，free()、delete()用于减少堆
      4. ==栈==（stack）：用于存储函数调用时的临时信息结构，如函数调用时传递的参数、函数的返回地址、函数的局部变量等。（在编译器需要时分配，不需要时删除）

   2. 随着函数调用层数的增加，函数栈帧在栈空间一块块地向低地址方向延伸。

   3. 栈的结构：ESP（SP）栈顶指针（低地址），EBP（BP）基地址指针（高地址）

      1. 从高地址向低地址依次存入：传递给函数的实参、函数返回地址RET、调用函数前的EBP、函数中的局部变量。

         ![image-20201110215657076](C:\Users\Lch\AppData\Roaming\Typora\typora-user-images\image-20201110215657076.png)

   4. 栈溢出原理：局部变量压入的数据超过了预先分配的局部变量空间，出现栈溢出，导致压入的局部变量数据占用了EBP、返回地址RET、实参的空间，就等于替换了这些空间的内容

   5. 函数调用的流程：

      1. 将指针寄存器EIP中的内容（指向CPU将要运行的下一条指令的地址）压入栈，作为函数的返回地址RET
      2. 再将基址寄存器EBP中内容（指向当前函数栈的底部）压入栈。
      3. 将当前栈顶指针ESP内容拷贝到EBP中，即将当前栈顶作为新的栈底。
      4. 如果使用了动态分配空间，就将ESP减去相应数值（因为是栈，所以ESP减少就等于扩大栈）

   6. 例子：

      <img src="C:\Users\Lch\AppData\Roaming\Typora\typora-user-images\image-20201110221458796.png" alt="image-20201110221458796" style="zoom:50%;" />

      <img src="C:\Users\Lch\AppData\Roaming\Typora\typora-user-images\image-20201110221511420.png" alt="image-20201110221511420" style="zoom:50%;" />

      如下所示，输入的数据覆盖了EBP和RET

      <img src="C:\Users\Lch\AppData\Roaming\Typora\typora-user-images\image-20201110221550681.png" alt="image-20201110221550681" style="zoom:50%;" />

6. 栈溢出利用流程：

   1. 寻找溢出点

      1. 探测法
      2. 反汇编分析

   2. 覆盖执行控制地址

      1. 覆盖返回地址
      2. 覆盖函数指针变量
      3. 覆盖异常处理结构

   3. 覆盖异常处理结构

      1. windows异常处理机制称为结构化异常处理（Structured Exception Handing）。当程序发生异常时，系统中断当前线程，将控制权交给异常数理程序。

   4. 跳转地址的确定

      1. 跳转指令的选取：jump esp、call ebx、call ecx
      2. 跳转指令的搜索范围：用户空间的任意地址、系统dll、进程代码段、PEB、TEB

   5. Shellcode定位和跳转

      1. shellcode的组成

         <img src="C:\Users\Lch\AppData\Roaming\Typora\typora-user-images\image-20201110225420818.png" alt="image-20201110225420818" style="zoom:50%;" />

      ![image-20201110224949879](C:\Users\Lch\AppData\Roaming\Typora\typora-user-images\image-20201110224949879.png)



## ShellCode的编写

1. shellcode：一段能够完成一定功能的可由计算机直接执行的机器代码，通常以16进制的形式存在









## 第一章 网络攻防技术概述

1. 网络安全威胁成因
   1. 技术：协议缺陷、软件漏洞、硬件漏洞、策略漏洞
   2. 人为：攻击者、防御者
2. 攻击步骤
   1. ==信息收集==：尽可能多地收集目标的相关信息，为后续的“精确”攻击立基础
      1. 方法：
         1. 主动攻击
            1. 利用公开信息服务
            2. 主机扫描和端口扫描
            3. 操作系统探测与应用程序类型识别
         2. 被动攻击
            1. 客户端应用的有关信息
            2. 用户的有关信息
   2. ==权限获取==：获取目标系统的==读、写、执行==等权限。
      1. 主动攻击
         	口令攻击
            	缓冲区溢出
            	脚本攻击
         被动攻击
         	特洛伊木马
         	使用邮件、IM等发送恶意链接….,,
   3. ==安装后门==：在目标系统中安装后门程序，以更加方便、更加隐蔽方式对目标系统进行操控。（方面进一步控制操作）
      1. 主机控制木马
         Web服务控制木马
   4. ==扩大影响==：以目标系统为“跳板”，对目标所属网络的==其它主机==进行击，最大程度地扩大攻击的效果。
      1. 可使用远程攻击主机的所有攻击方式
      2. 还可使用局域网内部攻击所特有的嗅探、假消息攻击等方法
   5. ==清除痕迹==：清除攻击的痕迹，以尽可能长久地对目标进行控制，防止被识别、追踪。
      1. Rootkit隐藏
         系统安全日志清除
         应用程序日志清除
   6. ![image-20210101150531559](D:\Typora\note\网络攻防技术.assets\image-20210101150531559.png)
3. “杀伤链”模型：
   1. 侦查跟踪-》武器构建-》载荷投递-》突防利用-》安装植入-》通信控制-》达成目标
   2. ![image-20210106123535207](D:\Typora\note\网络攻防技术复习笔记.assets\image-20210106123535207.png)



## 第二章 信息收集

1. 主动收集：通过直接访问、扫描网站，这种将流量流经网站的行为
   1. 特点：你能获取更多的信息，但是目标主机可能会记录你的作记录。
   2. 网络扫描
      1. 主机扫描
         1. ping
      2. 端口扫描：获得目标主机开放端口信息
         1. tcp connect 扫描
         2. ==SYN扫描==
         3. ==NMAP==
      3. 系统类型扫描
         1. ==根据端口扫描结果分析==：一些操作系统开放特定端口
         2. 应用程序BANNER
         3. TCP/IP协议栈指纹
   3. 漏洞扫描
      1. 漏洞来源：
         1. （1）硬件、软件或协议设计时的瑕疵
            （2）硬件、软件或协议实现中的弱点
            （3）硬件、软件本身的瑕疵	
            （4）系统和网络的错误配置
      2. 定义：指利用一些专门或综合漏洞扫描程序对目标存在的系统漏洞或应用程序漏洞进行扫描。
      3. 缺点：
         1. (1) 报告并不一定可靠
            (2) 易暴露目标
      4. 方法：
         1. 直接测试：利用漏洞特点发现系统漏洞的方法。
         2. 推断：不利用系统漏洞而判断漏洞是否存在的方法。它并不直接渗透漏洞，只是间接地寻找漏洞存在的证据。
            1. 采用推断方法的检测手段主要有版本检查、程序行为分析、操作系统堆栈指纹分析和时序分析等。
         3. 带凭证的测试：
   4. 网络拓扑探测
      1. ==SNMP==
      2. ==traceroute==技术
      3. shodan、zoomeye
2. 被动收集：利用==第三方==的服务对目标进行访问了解，比例：Google搜索
   1. 特点：你收集的信息会相对少，但是你的行动并不会被目标机发现。
   2. 方法：
      1. 利用==Web服务==
         1. 网站拥有者信息
            1. 邮编、地址
            2. 论坛版本号
            3. 网络管理员邮箱
            4. 公司人员名单、电话、邮箱
         2. 得到对应的IP地址
            1. 利用DNS服务器：提供域名到IP地址的映射
         3. 获取目标网络拓扑结构
            1. 网络拓扑图
               IP分配表
               子域名
               网络设备，安全设施
      2. 利用搜索引擎服务
         1. 共同特点：利用公开信息服务收集信息
            1. 信息是公开的
            2. 海量的信息中很多都是敏感的信息
         2. 方法
            1. google：
               1. 语法：![image-20210101151543132](D:\Typora\note\网络攻防技术.assets\image-20210101151543132.png)
               2. ![image-20210101151604729](D:\Typora\note\网络攻防技术.assets\image-20210101151604729.png)
            2. shodan：搜索所有接入互联网的设备
      3. 利用WhoIs服务
         1. 功能：查询已注册域名的拥有者信息
            1. 域名登记人信息
               联系电话和邮箱
               域名注册时间和更新时间
               权威DNS的IP地址
         2. 使用方法：
            1. www.whois.net
            2. SamSpade等网络实用工具
            3. 站长之家
            4. 爱站
            5. 微步
            6. 天眼查
            7. ICP备案查询网
            8. 国家企业信用信息公示系统
      4. 利用==DNS==域名服务：查询域名对应ip地址
      5. 公开信息收集方法的应用
         1. 社会工程学：利用受害者心理弱点、本能反应、好奇心、信任、贪婪等心理陷阱进行诸如欺骗、伤害等危害手段。
            从同学录中寻找目标
            在论坛、聊天室设“钓鱼”陷阱
            通过简历收集信息
            利用搜索引擎进行数据挖掘
            网站出售注册信息



## 第三章 口令攻击

1. 攻击分类：

   1. 针对口令强度的攻击
      1. 字典攻击：将高频口令存放在字典中，然后通过多种规则足组合再生成猜测字典
      2. 强力攻击：尝试所有字母、数字、特殊符号的组合，暴力破解
      3. ==组合攻击==：
      4. ==撞库攻击==：通过收集网络上已暴露的用户名与口令等信息，尝试登陆
      5. 彩虹表攻击：彩虹表是一种破解哈希算法的技术，可破解MD5、HASH等多种密码
   2. 针对口令传输的攻击
      1. 嗅探攻击：混杂模式
      2. 键盘记录
      3. 网络钓鱼
      4. 重放攻击
   3. 针对口令存储的攻击
      1. winwods口令存储位置：
         1. %systemroot%system32\config\目录下  
         2. %SystemRoot%\repair目录下的SAM._文件 
         3. 注册表中HKEY_LOCAL_MACHINE\SAM键
         4. Winlogon.exe的内存块中
      2. 方法：
         1. 获取系统自动保存的口令字
         2. 直接读取windows系统中的登陆口令
         3. 破解SAM信息

2. 口令攻击的防范：

   1. 选择安全密码

      1. 足够长度
      2. 含大小写字母、数组、特殊符号

   2. 防止口令猜测攻击

      1. 硬盘分区采用NTFS格式
      2. ==正确设置和管理帐户==
      3. ==禁止不需要的服务==
      4. ==关闭不用的端口==

   3. 设置安全策略

      1. 不要将口令告诉他人，也不要在不同系统上使用同一口令。
      2. 不要将口令记录在别人可以看见的地方。
      3. 口令应在允许的范围内尽可能取长一点。
      4. 定期改变口令。

      

## 第四章-软件漏洞

1. 漏洞：漏洞就是可以被攻击利用的系统弱点。
2. 漏洞攻击的三个步骤
   1. 漏洞发现
   2. 漏洞分析
   3. 漏洞利用
3. 后果：
   1. 以匿名身份直接获取系统最高权限；
   2. 从普通用户提升为管理员用户；
   3. 实施远程拒绝服务攻击等。
4. 典型漏洞类型：
   1. 栈溢出
   2. 堆溢出
   3. 格式化串
   4. 整型溢出
   5. 释放再利用
5. 栈溢出原理：在栈中压入的数据超过预先分配的容量时，就会出现栈溢出，从而使得程序运行失败。会覆盖栈中其他数据的内存
6. 溢出攻击的基本==流程==
   1. 注入恶意数据
   2. 溢出缓冲区
   3. 控制流重定向
   4. 执行有效载荷
7. 栈溢出关键技术
   1. 确定溢出点：
      1. 探测法：逐渐增加输入字符串长度
      2. 反汇编分析
   2. 覆盖执行控制地址
      1. 覆盖返回地址
      2. 覆盖函数指针变量
      3. 覆盖异常处理结构
   3. 覆盖异常处理结构
      1. 异常处理是一种对程序异常的处理机制，它把错误处理代码与正常情况下所执行的代码分开。
      2. 当程序发生异常时，系统中断当前线程，将控制权交给异常处理程序
   4. 跳转地址的确定
      1. 用户空间的任意地址、系统dll、进程代码段、PEB、TEB
      2. 跳转指令地址的选择规律
   5. shellcode的定位和跳转
      1. shellcode组成
         1. ![image-20210101163904133](D:\Typora\note\网络攻防技术.assets\image-20210101163904133.png)
8. shellcode编写
   1. shellcode：一段能完成特定功能的机器代码（16进制）
   2. 存在的问题
      1. 正常退出
      2. 处理null字节
      3. 加载dll
      4. 写通用/动态/可移植的shellcode
9. 堆溢出
   1. 堆：是存放由malloc等函数==动态==分配数据的内存空间
10. 后门shellcode的编写
11. 
12. 



## 第五章 web应用攻击

1. XSS跨站脚本攻击

   1. 流行的原因：

      1. web浏览器本身设计是不安全的；
         输入和输出是web应用程序最基本的交互，过程中没有很好的安全防护；
         团队合作开发，人员安全素质参差不齐；
         开发人员没有XSS漏洞意识；
         触发XSS攻击的方式非常简单，防御困难；
         web2.0的流行，提供了XSS更多的表演平台。

   2. 危害：

      (1)网络钓鱼，包括盗取各类用户账号
      (2)窃取用户cookies资料，从而获取用户隐私信息，或利用好用户身份进行一部对网站执行操作
      (3)劫持用户（浏览器）会话，从而执行任意操作，例如非法转账、强制发表日志、发送电子邮件等
      (4)强制弹出广告页面、刷流量等；
      (5)网页挂马
      (6)进行恶意操作，例如任意篡改页面信息、删除文章等；

      (7)进行大量的客户端攻击，如DDoS攻击；
      (8)提取客户端信息，例如用户的浏览历史、真实IP、开放端口等；
      (9)控制受害者机器向其它网站发起攻击；
      (10)结合其他漏洞，如CSRF漏洞，实施进一步作恶；
      (11)提升用户权限，包括进一步渗透网站；
      (12)传播跨站脚本蠕虫；.....

   3. 类型分类

      1. 反射型XSS
         1. 非持久性、参数性xss
         2. 恶意脚本附加到==URL地址参数==中
         3. ![image-20210101172816325](D:\Typora\note\网络攻防技术.assets\image-20210101172816325.png)
      2. 存储性XSS
         1. 持久性
         2. 一般攻击存在留言、评论、博客日志中，xss存储在了服务器的数据库中
         3. ![image-20210101172915526](D:\Typora\note\网络攻防技术.assets\image-20210101172915526.png)
      3. DOM xss(==和反射型类似==)
         1. 不需要与服务器端进行交互
         2. ![image-20210101172938313](D:\Typora\note\网络攻防技术.assets\image-20210101172938313.png)

   4. 防范措施

      1. ==httponly==属性：可禁止任何脚本访问cookie内容
      2. 安全编码

2. sql注入攻击

   1. 类型分类
      1. 字符型sql注入
      2. 数字型sql注入
      3. 基于==错误信息==的sql注入
      4. sql==盲注==入：服务器关闭了错误信息，所以称为盲注，一般使用布尔值、时间函数等
   2. 注入步骤
      1. ==注入点==的发现
      2. ==数据库==的类型
      3. 猜解==表==名
      4. 猜解==字段==名
      5. 猜解==内容==
      6. 进入管理页面，==上传asp木马==
   3. sql注入的危害
      1. 读取、修改或者删除数据库内的==数据==，获取数据库中的用名和密码等敏感信息
      2. 获得数据库管理员的==权限==
      3. 如果能够再利用SQL Server扩展存储过程和自定义扩展过程来执行一些系统命令，攻击者还可以获得该==系统的控制权==
   4. 防范措施：
      1. 特殊字符转义
      2. 输入验证和过滤
      3. 参数化方法



## 第六章 恶意代码

1. 恶意代码：未经授权、干扰或破坏计算机系统/网络功能的程序或代码（一组指令）称之为恶意程序。

2. 功能：

   1.  删除敏感信息
   2. 作为网络传播的起点
   3. 监视键盘
   4. 收集你的相关信息，如常访问的站点/search的关键词/上网时间等
   5.  获取屏幕
   6.  在系统上执行指令/程序
   7.  窃取文件，如私人/财务/技术/商业机密
   8.  开启后门，作为攻击其他计算机的起点/（肉鸡）
   9. 隐藏在你主机上的所有活动

3. 种类

   1. 计算机病毒
   2. 特洛伊木马
   3. 计算机蠕虫
   4. 逻辑炸弹
   5. 用户级rootkit
   6. 内核级rootkit
   7. 脚本恶意代码
   8. 只有蠕虫、恶意移动代码是独立的，其他的都依赖进程
   9. ![image-20210101173936921](D:\Typora\note\网络攻防技术.assets\image-20210101173936921.png)

4. 病毒的生命周期

   1. 潜伏阶段
   2. 传染阶段
   3. 触发阶段
   4. 发作阶段

5. 特征

   （1）传染性
   （2）非授权性 
   （3）隐蔽性 
   （4）潜伏性 

   （5）破坏性 
   （6）不可预见性 
   （7）可触发性 

6. 三种机制（对于3个阶段）

   1. 传染机制
   2. 触发机制
   3. 破坏机制

7. 传播机制

   1. 移动存储
   2. 互联网
   3. email
   4. 局域网
   5. 盗版软件
   6. 修理服务

8. 病毒和蠕虫对比：

   1. ![image-20210101174736517](D:\Typora\note\网络攻防技术.assets\image-20210101174736517.png)

9. 蠕虫的特征

   1.  主动攻击
       行踪隐蔽
       利用系统、网络应用服务漏洞
       造成网络拥塞
       降低系统性能 
       产生安全隐患 
       反复性/破坏性

10. 蠕虫的组成

    1. ![image-20210101174817797](D:\Typora\note\网络攻防技术.assets\image-20210101174817797.png)
    2. 弹头
    3. 传播引擎
    4. 目标算法
    5. 扫描引擎
    6. 有效载荷

11. 木马：一种基于远程控制的黑客工具

    1. 特点

       1. 欺骗性
       2. 隐蔽性
       3. 非授权性

    2. 功能：

       1. 保留访问权限
          信息收集
          收集系统关键信息
          收集密码或密码文件

          远程控制 
          远程命令执行
          远程文件操作
          其它的特殊功能

    3. 植入技术

       1. 直接攻击法：通过系统漏洞，将木马发送并安装到远程计算机中
       2. 文件下载法：将木马程序与其他软件捆绑在一起，放在站点，当用户下载软件并打开的同时，也安装了木马
       3. 接触植入法：U盘、充电宝
       4. 电子邮件传播：附件或内容
       5. ==网页挂马==：攻击者在网页上加入溢出代码，用户在浏览网页或者点击某一个==链接==时，==IE浏览器溢出==，溢出以后恶意代码就可以自动从网站的指定位置下载木马文件并执行
       6. 应用软件漏洞法：
       7. 社会工程学法：通过各种方法获取目标用户的信任，然后通过向对方发绑定了木马的文件引诱对方点击，或者直接在他机器上运行木马。

    4. 基本特性：

       1. 自启动：HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run
          和
          HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run
       2. 功能特性
       3. 抗查杀
       4. 隐蔽性
          1. 反弹木马
          2. ICMP方法
          3. 隐藏端口
             1. 寄生
             2. 潜伏，使用ICMP协议
          4. NT进程的隐藏
         1. ==让管理员看不见你的进程==
             2. 不使用进程：==使用dll木马==，并且通过别的程序来运行它

    5. DLL实现木马
    
       1. RUNDLL32
          1. Rundll32 DllFileName FuncName
             Rundll32.exe MyDll.dll MyFunc
       2. 特洛伊DLL：特洛伊DLL（欺骗DLL）的工作原理是使用欺骗DLL替换常用的DLL文件，通过函数转发器将正常的调用转发给原DLL，截获并处理特定的消息。
       3. 动态嵌入技术：最高境界是将自己的代码嵌入正在运行的进程中



## 第七章 假消息攻击

1. 假消息攻击：利用网络协议设计中的安全漏洞，通过发送==伪造的==数据包，达到欺骗目标的目的
2. TCP/IP的设计缺陷
   1. 缺乏有效的信息==加密==机制，通信内容容易被第三方截获
   2. 缺乏有效的==身份鉴别和认证==机制，通信双方无法确认彼此的身份
3. 假消息攻击类型
   1. 应用层：DNS欺骗、SSL中间人
   2. 传输层：IP欺骗、SYN Flood(TCP、IP)
   3. 网络层：ICMP重定向、IP分片攻击
   4. 数据链路层：ARP欺骗
4. 嗅探（SNIFF）：网络中的窃听
5. 嗅探的恶意目的
   1. 窃取用户名和口令
   2. 窃取==机密信息==
   3. 窥探==底层协议==信息，如DNS服务器的ip，本机ip、本机MAC、网关IP、一次TCP连接的seq num
   4. 中间人攻击时篡改数据的基础
6. 嗅探正当用途：
   1. 网络诊断
   2. 网络性能分析
   3. 检测网络入侵
   4. 记录日志
   5. 解释网络中数据包的含义
7. 802.3以太网
   1. 共享式以太网：同轴电缆、hub
   2. 交换式以太网：交换机
8. 网卡（网络适配器）
   1. 工作在数据链路层，在处理完数据链路层的数据后（脱头），将数据包再传给操作系统
   2. 收到数据包后，==检查其目标MAC地址==，然后根据程序设置，决定是否接受
   3. 侦听模式分类
      1. 单播模式：只接受目标MAC和本机MAC相同的帧和广播数据帧（点对点）
      2. 组播模式：接收单播、广播和组播数组帧（接受一类）
      3. 混杂模式：接收所有数据帧(全收)
9. MAC==泛洪==：向==交换机==发送大量虚构的MAC地址和对应的IP包，是交换机无法处理这么多信息，使其进入“打开失效”模式，即不再服务，转而直接广播（DOS攻击？）
10. MAC==欺骗==（欺骗交换机）：攻击者将自己==MAC==和目标==IP==组成的数据包不断的发给交换机，使交换机不断更新MAC-端口映射表，从而使交换机误认为攻击者的MAC就是目标主机的MAC，最终使得原本发送给目标的数据包转而发给了攻击者
11. ARP欺骗：通过对网关和目标主机进行ARP欺骗，使其误认为攻击者的MAC就是对方的MAC
12. 数据包协议头：
    1. 规则就是：在对应的层工作时，就必须有对应层的协议头
    2. ![image-20210104211750157](D:\Typora\note\网络攻防技术复习笔记.assets\image-20210104211750157.png)
    3. ![image-20210104211816504](D:\Typora\note\网络攻防技术复习笔记.assets\image-20210104211816504.png)
13. 嗅探的防范：
    1. 网络分段
    2. 会话加密
    3. 使用==静态的ARP==缓存
14. ARP协议：将ip地址映射为MAC地址
15. ARP欺骗的危害
    1. 拒绝服务攻击
    2. 嗅探
    3. 中间人攻击
16. ARP欺骗的防范
    1. 建立==DHCP==服务器
    2. 局域网中建立==MAC数据库==
    3. 网关==关闭ARP动态刷新==过程
    4. 局域网监听ARP数据包
    5. 使用VLAN或PVLAN技术
17. ICMP报文类型：
    1. 差错报告报文
       1. 目的不可达
       2. 源抑制
       3. 超时
       4. 参数问题
       5. 重定向
    2. 查询报文
       1. 回送请求和应答
       2. 时间戳请求和应答
       3. 地址掩码请求和应答
       4. 路由器询问和通告
18. ICMP重定向报文：功能==路由器==发给==主机==的路由表信息，使主机拥有动态的、既小且优的路由表
19. ICMP重定向攻击的危害：
    1. 改变对方的路由表（存储发送信息所选择的路径）
    2. ==与ARP欺骗类似==,可以用来做dos、嗅探、中间人攻击
20. ICMP重定向攻击的防范
    1. ==配置防火墙==，拒绝接受ICMP重定向报文
    2. 可以linux和windows下通过==软件防火墙==拒绝ICMP重定向报文
21. IP欺骗：攻击者主机冒充另一台主机的IP
22. IP欺骗原理：使用==TCP flood==使B主机无法工作，然后冒充B主机与A主机进行三次握手（使另一台主机DOS，然后直接冒用其IP即可）。（并不因为名字是IP所以是网络层攻击，因为使用的是TCP FLOOD使另一台主机DOS，所以是传输层攻击）
23. IP欺骗的危害
    1. 以可信任的身份与服务器建立连接
    2. 伪造源IP地址，隐藏攻击者身份，==消除了攻击痕迹==
24. IP欺骗的防范：
    1. 会话变成不活动状态前立即注销连接
    2. 使用==加密==的终端协议
    3. 使用==随机的初始序列号==，使TCP序列号难以猜测
    4. 抛弃基于IP地址的信任策略
25. DNS欺骗（应用层攻击）：即用户输入域名，却被DNS欺骗而访问其他IP
    1. 本地DNS ID欺骗：
       1. ==使本地DNS服务器无法工作==（DOS），然后攻击者发送返回DNS数据包给客户端
    2. 远程DNS ID欺骗：
       1. 欺骗本地DNS服务器，使用大量返回数据包==欺骗DNS服务器==，使其认为域名对应的ip就是攻击者发送的ip
26. DNS欺骗的防范
    1. 对高速缓存器加以限制，使其不保留额外的记录
    2. 不依赖DNS架构安全体系
    3. ==直接用ip访问重要的服务==（不用域名）
    4. 使用SSL之类的加密技术
27. SSL中间人攻击的防范
    1. 仔细查看证书来源和属性
    2. 不要打开证书来源不可行的网址



## 第八章 拒绝服务攻击

1. 拒绝服务攻击：指攻击者通过攻击网络节点、网络链路、网络应用致使合法用户无法得到正常服务响应的网络攻击行为
2. 分类
   1. 漏洞性：利用软件漏洞，是服务器或系统崩溃
   2. 重定向性：利用网络协议的设计缺陷，是目标传输的数据被重定向到错误的ip
   3. 资源消耗性：通过大量请求占用其带宽或资源，使其性能下降甚至丧失
3. 传统拒绝服务攻击：
   1. ping of death：发送超长ip数据包，使目标系统拒绝服务
   2. TearDrop：利用IP包分片重组在多个操作系统协议栈中实现时存在的漏洞
   3. Land攻击：发送微操做的TCP SYN报文，原地址和目的地址均设置为目标ip，是目标主机死锁
4. 泛洪攻击：发送大量请求，消耗目标资源
   1. TCP泛洪，又称SYN泛洪：发送TCP连接请求
   2. UDP泛洪：发送UDP报文（不需要连接请求）
   3. HTTP泛洪：发送大量HTTP GET或POST请求
5. 低速率拒绝服务攻击
   1. 利用网络协议或应用服务协议中自适应机制存在的安全问题，周期性地发送高速脉冲攻击数据包，达到降低被攻击主机服务性能的目的
   2. 原理：LDoS攻击利用TCP 拥塞控制机制，故意制造网络拥塞状况，使拥塞控制一直处于调整状态，发送端的发送速率会迅速变小，导致被攻击主机的服务性能显著降低
6. 分布式拒绝服务攻击：指利用网络中不同位置的大量主机，协作对目标发起的拒绝服务攻击
   1. 分类：
      1. 僵尸网络的分布式拒绝服务攻击
      2. 反射型副本是拒绝服务攻击
7. 僵尸网络（botnet）：攻击者通过传播僵尸程序，控制了大量主机（僵尸主机 /robot/bot），并通过一对多的命令控制的网络
   1. 集中式命令控制机制：攻击者将命令发给1个或多个控制服务器，然后由这些服务器发送命令给其他僵尸主机
   2. 分布式命令控制机制：攻击者任意发送命令给某个僵尸结点，然后该结点和之后接受到命令的结点都会再次传播该命令
8. 反射型DDOS：攻击者利用反射器，将大力响应包汇集到目标主机，使其瘫痪
   1. DNS反射：向DNS服务器发送源IP为目标IP的请求包，是大量DNS服务器都回应目标IP
   2. LDAP方法攻击：通过向LDAP服务器发送伪造源IP的查询请求
   3. NTP方法攻击：攻击者向NTP服务器发送伪造源IP的查询请求
9. DOS防御：
   1. ==预防==着眼于在攻击发生前消除拒绝服务攻击的可能性
      1. 抑制僵尸网络规模
      2. 过滤伪造源地址报文
      3. 减少可用反射/放大器
   2. ==检测==是检测拒绝服务攻击的发生，区分攻击流量和正常流量，为后续的响应提供依据
      1. 特征检测：通过分析得到攻击行为区别于其它正常用户访问行为的唯一特征，并据此建立已知攻击的特征库
      2. 异常检测：攻击会导致当前的网络状态与正常网络状态模型产生显著的不同。异常检测通过对比两者检测出攻击的发生
   3. ==响应==关注于在拒绝服务攻击发生后降低乃至消除攻击的危害与影响
      1. “流量清洗”： 对攻击流量进行过滤，设法将恶意的网络流量剔除掉，只将合法的网络流量交付服务器
   4. ==容忍==致力于在拒绝服务攻击发生后保持服务的可用性
      1. CDN
      2. AnyCast
10. DOS的预防：
    1. 抑制僵尸网络规模
    2. 过滤伪造源地址报文
    3. 减少可用反射/放大器
11. DOS检测：区分正常流量和攻击流量
    1. 特征检测：通过分析得到攻击行为区别于其它正常用户访问行为的唯一特征，并据此建立已知攻击的特征库
    2. 异常检测：攻击会导致当前的网络状态与正常网络状态模型产生显著的不同。异常检测通过对比两者检测出攻击的发生
12. DOS响应：检测到DOS后的降低危险措施
    1. “流量清洗”： 对攻击流量进行过滤，设法将恶意的网络流量剔除掉，只将合法的网络流量交付服务器
13. DOS容忍：通过提高处理请求的能力消除攻击的影响
    1. CDN
    2. AnyCast



## 第九章 无线网络安全

1. WLAN(无线局域网)：基于802.11n/b/g/a标准，利用wifi通信技术将PC等设备连接起来，实现互相通信的网络
2. WIFI：一种可将终端设备以无限方式相互连接的技术
3. WLAN传播媒介
   1. 无线电波（频率由各个国家的无线电管理部门规定）
      1. 无线电波
      2. 微博
   2. 光波
      1. 红外线
4. 一些概念
   1. 无线站点（STA station）：终端设备
   2. 无线接入点（Access Point ,AP）：专用无线接入设备
5. 无线局域网的安全威胁
   1. 未经授权使用网络服务
   2. 地址欺骗和会话拦截（中间人攻击）
   3. 高级入侵
6. 
























